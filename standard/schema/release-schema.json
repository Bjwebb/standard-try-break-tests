{
    "id": "https://raw.githubusercontent.com/open-contracting/standard/master/standard/schema/release-schema.json",
    "$schema": "http://json-schema.org/draft-04/schema#",
    "title": "Schema for an Open Contracting Release",
    "type": "object",
    "properties": {
        "ocid": {
            "title": "Open Contracting ID",
            "description": "A unique identifier that identifies the unique Open Contracting Process. For more information see: http://ocds.open-contracting.org/standard/r/0__3__2/#defining-a-unique-contracting-process",
            "type": "string"
        },
        "id": {
            "title": "Release ID",
            "description": "A unique identifier that identifies this release. A releaseID must be unique within a release-package and must not contain the # character.",
            "type": "string"
        },
        "date": {
            "title": "Release Date",
            "description": "The date this information is released, it may well be the same as the parent publishedDate, it must not be later than the publishedDate from the parent package. It is used to determine merge order.",
            "type": "string",
            "format": "date-time"
        },
        "tag": {
            "title": "Release Tag",
            "description": "A tag that identifies the nature of the release being made. Tags may be used to filter release, or, in future, for for advanced validation when certain kinds of releases should contain certain fields. See the codelist guidance for definitions of each tag.",
            "type": "string",
            "enum": ["planning", "tenderNotice", "awardNotice", "contractSignature", "contractAmendment", "report", "spending", "terminationNotice", "compiled"]
        },
        "language": {
            "title": "Release language",
            "description": "Specifies the default language of the data, in ISO 639-1 codes see: https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes.",
            "type": ["string", "null"],
            "default": "en"
        },
        "buyer": {
            "title": "Buyer",
            "description": "The buyer is the entity whose budget will be used to purchase the goods. This may be different from the procuring agency who may be specified in the tender data.",
            "$ref": "#/definitions/Organization"
        },
        "planning": { 
            "title": "Planning",
            "description": "Information from the planning phase of the contracting process. This includes information related to the process of deciding what to contract for, when and how.",
            "$ref": "#/definitions/Planning"
        },
        "formationType": {
            "title": "Formation type",
            "description": "String specifying the type of formation process used for this contract. Currently only tender is supported.",
            "type": "string",
            "enum": ["tender"]
        },
        "tender": {
          	"title": "Tender",
            "description": "The activities undertaken in order to enter into a contract.",
            "$ref": "#/definitions/Tender"
        },
        "awards": { 
            "title": "Awards",
            "description": "Information from the award phase of the contracting process. There may be more than one award per contracting process e.g. because the contract is split amongst different providers, or because it is a standing offer.",
            "type": "array",
            "mergeStrategy": "arrayMergeById",
            "mergeOptions": {"idRef": "id"},
            "items": { "$ref": "#/definitions/Award" },
            "uniqueItems": true
        },
        "contracts": { 
            "title": "Contracts",
            "description": "Information from the contract creation phase of the procurement process.",
            "type": "array",
            "mergeStrategy": "arrayMergeById",
            "mergeOptions": {"idRef": "id"},
            "items": {"$ref": "#/definitions/Contract" },
            "uniqueItems": true
        },
        "implementation": { 
            "title": "Implementation",
            "description": "Information related to the implementation of the contract in accordance with the obligations laid out therein.",
            "$ref": "#/definitions/Implementation" 
        }
    },
    "required": ["ocid", "id", "date", "tag", "formationType"],
    "definitions": {
        "Identifier": {
            "type": "object",
            "properties": {
                "name": {
                    "type": "string"
                },
                "scheme": {
                    "description": "The scheme that holds the unique identifiers used to identify the item being identified.",
                    "type": ["string", "null"],
                    "format": "uri"
                },
                "uid": {
                    "description": "The unique ID for this entity under the given ID scheme.",
                    "type": ["string", "integer", "null"]
                },
                "uri": {
                    "type": ["string", "null"],
                    "format" : "uri"
                }
            },
            "patternProperties": {
                "^(name_[A-Za-z]{2})$": {
                    "type": ["string", "null"]
                }
            },
            "required": ["name"]
        },
        "Address": {
            "description": "An address",
            "type": "object",
            "properties": {
                "streetAddress": {
                    "type": ["string", "null"]
                },
                "locality":{
                    "type": ["string", "null"]
                },
                "region": {
                    "type": ["string", "null"]
                },
                "postalCode": {
                    "type": ["string", "null"]
                },
                "countryName": {
                    "type": ["string", "null"]
                }
            },
            "patternProperties": {
                "^(countryName_[A-Za-z]{2})$": {
                    "type": ["string", "null"]
                }
            }
        },
        "Organization": {
            "title": "Organization",
            "description": "An organization.",
            "type": "object",
            "properties": {
                "id": { "$ref": "#/definitions/Identifier" },
                "address": { "$ref": "#/definitions/Address" }
            }
        },
        "Item": {
            "type": "object",
            "description": "A good, service, or work to be contracted.",
            "properties": {
                "description": {
                    "description": "A description of the goods, services to be provided.",
                    "type": ["string", "null"]
                },
                "classificationScheme": {
                    "description": "The classification scheme for the goods",
                    "type": ["string", "null"],
                    "enum": ["CPV", "GSIN", "UNSPSC", "Other", null]
                },
                "otherClassificationScheme": {
                    "description": "If the classification schema was not in list, please specify",
                    "type": ["string", "null"]
                },
                "classificationID": {
                    "description": "The classification ID from the Scheme used",
                    "type": ["string", "null"]
                },
                "classificationDescription": {
                    "description": "A description of the goods, services to be provided.",
                    "type": ["string", "null"]
                },
                "unitOfMeasure": {
                    "description": "Description of the unit which the good comes in e.g. hours, kilograms",
                    "type": ["string", "null"]
                },
                "quantity": {
                    "description": "The number of units required",
                    "type": ["integer", "null"]
                },
                "valuePerUnit": {
                    "description": "The value per unit of the item specified.",
                    "$ref": "#/definitions/Value"
                }
            },
            "patternProperties": {
                "^(description_[A-Za-z]{2})$": {
                    "type": ["string", "null"]
                },
                "^(classificationDescription_[A-Za-z]{2})$": {
                    "type": ["string", "null"]
                }
            }
        },
        "Milestone": {
            "type": "object",
            "properties": {
                "description": {
                    "description": "A description of the milestone.",
                    "type": ["string", "null"]
                },
                "date": {
                    "description": "The date the milestone is either due or completed (as specified by dateType).",
                    "type": ["string", "null"],
                    "format": "date-time"
                },
                "dateType": {
                    "description": "Specify whether the date field is referring to a due date or a completed date.",
                    "type": ["string", "null"],
                    "enum": ["due", "completed", null]
                },
                "documents": {
                    "description": "List of documents associated with this milestone.",
                    "type": "array",
                    "mergeStrategy": "arrayMergeById",
                    "mergeOptions": {"idRef": "id"},
                    "items": { "$ref": "#/definitions/Document" },
                    "uniqueItems": true
                }
            },
            "patternProperties": {
                "^(description_[A-Za-z]{2})$": {
                    "type": ["string", "null"]
                }
            }
        },
        "Implementation": {
            "type": "object",
            "title": "Implementation",
            "description": "Information during the performance / implementation stage of the contract.",
            "properties": {
                "transactions": {
                    "description": "A list of the spending transactions made against this contract",
                    "type": "array",
                    "items": {
                        "type": "object",
                        "properties": {
                            "dataPackageURI": {
                                "description": "The link to the budget data package (called a budget data package, but includes budget and spending data), as defined by http://github.com/openspending/budget-data-package",
                                "type": "string",
                                "format": "uri"
                            },
                            "id": {
                                "description": "The ID of the item in the budget data package, which this procurement is associated with. https://github.com/openspending/budget-data-package/blob/master/specification.md#required-fields-all-categories",
                                "type": "string"
                            },
                            "amount": {
                                "description": "The amount of the transaction as described in the budget data package (https://github.com/openspending/budget-data-package/blob/master/specification.md#required-fields-all-categories). This provides some redundancy, but does not give full context such as the currency, date of transaction etc. which should be retrieved from the budget data pacakge.",
                                "type": ["number", "null"]
                            }
                        },
                        "required": ["dataPackageURI", "id"],
                        "dependencies": {
                            "id": ["dataPackageURI"],
                            "amount": ["dataPackageURI"]
                        }
                    }
                },
                "milestones": {
                    "description": "As milestones are completed, milestone completions should be documented.",
                    "type": "array",
                    "items": { "$ref": "#/definitions/Milestone" }
                },
                "documents":{
                    "description": "Documents and reports that are part of the implementation phase e.g. audit and evaluation reports.",
                    "type": "array",
                    "mergeStrategy": "arrayMergeById",
                    "mergeOptions": {"idRef": "id"},
                    "items": { "$ref": "#/definitions/Document" },
                    "uniqueItems": true
                }
            }
        },
        "Planning": {
            "title": "Planning",
            "description": "Information from the planning phase of the contracting process. Note that many other fields may be filled in a planning release, in the appropriate fields in other schema sections, these would likely be estimates at this stage e.g. totalValue in tender",
            "type": "object",
            "properties": {
                "budget": {
                    "type": "object",
                    "title": "Budget",
                    "description": "Information about the budget item that this procurement relates to.",
                    "properties": {
                        "dataPackageURI": {
                            "description": "The link to the budget data package, as defined by http://github.com/openspending/budget-data-package",
                            "type": ["string", "null"],
                            "format": "uri"
                        },
                        "id": {
                            "description": "The ID of the item in the budget data package, which this procurement is associated with. https://github.com/openspending/budget-data-package/blob/master/specification.md#required-fields-all-categories",
                            "type": ["string", "null"]
                        },
                        "amount": {
                            "description": "The amount of the item in the budget data package, which this procurement is associated with. https://github.com/openspending/budget-data-package/blob/master/specification.md#required-fields-all-categories. This provides some redundancy, but does not give full context such as the currency, date of transaction etc. which should be retrieved from the budget data pacakge.",
                            "type": ["number", "null"]
                        }
                    },
                    "dependencies": {
                        "id": ["dataPackageURI"],
                        "amount": ["dataPackageURI"]
                    }
                },
                "rationale": {
                    "description": "The rationale for the procurement",
                    "type": ["string", "null"]
                },
                "anticipatedMilestones": {
                    "description": "A list of anticipated milestones for the contract.",
                    "type": "array",
                    "items": { "$ref": "#/definitions/Milestone" }
                },
                "documents": {
                    "description": "A list of documents related to the planning process, including public hearing notices.",
                    "type": "array",
                    "mergeStrategy": "arrayMergeById",
                    "mergeOptions": {"idRef": "id"},
                    "items": { "$ref": "#/definitions/Document" }
                }
            },
            "patternProperties": {
                "^(strategicJustificiation_[A-Za-z]{2})$": {
                    "type": ["string", "null"]
                }
            }
        },
        "Tender": {
            "title": "Tender",
            "description": "Data regarding tender process - publicly inviting prospective contractors to submit bids for evaluation and selecting a winner or winners.",
            "type": "object",
            "required": ["id"],
            "properties": {
                "id": {
                    "title": "Tender ID",
                    "description": "An identifier for this tender process. This may be the same as the ocid, or may be drawn from an internally held identifier for this tender.",
                    "type": "string"
                },
                "items": {
                    "title": "Items to be procured",
                    "description": "The goods and services to be purchased, broken into line items wherever possible. Items should not be duplicated, but a quantity of 2 specified instead.",
                    "type": "array",
                    "minItems": 1,
                    "items": { "$ref": "#/definitions/Item" },
                    "uniqueItems": true
                },
                "value": {
                    "description": "The total estimated value of the procurement.",
                    "$ref": "#/definitions/Value"
                },
                "procurementMethod": {
                    "description": "Specify tendering method as per GPA definitions of Open, Selective, Limited (http://www.wto.org/english/docs_e/legal_e/rev-gpr-94_01_e.htm)",
                    "type": ["string", "null"],
                    "enum": ["Open", "Selective", "Limited", null]
                },
                "methodJustification": {
                    "description": "Justification of procurement method, especially in the case of Limited tendering.",
                    "type": ["string", "null"]
                },
                "selectionCriteria": {
                    "description": "Specify the selection criteria, by lowest cost, ",
                    "type": ["string", "null"],
                    "enum": ["Lowest Cost", "Best Proposal", "Best Value to Government", "Single bid only", null]
                },
                "selectionDetails": {
                    "description": "Any detailed or further information on the selection criteria.",
                    "type": ["string", "null"]
                },
                "submissionMethod": {
                    "description": "Specify the method by which bids must be submitted, in person, written, or electronic auction",
                    "type": ["string", "null"],
                    "enum": ["Electronic Auction", "Electronic Submission", "Written", "In Person", null]
                },
                "submissionDetails" : {
                    "description": "Any detailed or further information on the submission method. This may include the address, e-mail address or online service to which bids should be submitted, and any special requirements to be followed for submissions.",
                    "type": ["string", "null"]
                },
                "tenderPeriod": {
                    "description": "The period when the tender is open for submissions. The end date is the closing date for tender submissions.",
                    "$ref": "#/definitions/Period"
                },
                "clarificationPeriod": {
                    "description": "The period during which clarification requests may be made and will be answered.",
                    "$ref": "#/definitions/Period"
                },
                "clarifications": {
                    "description": "A Yes/No field as to whether clarifications were issued. Would expect clarifications to appear as amendments.",
                    "type": ["boolean", "null"]
                },
                "awardPeriod": {
                    "description": "The date or period on which an award is anticipated to be made.",
                    "$ref": "#/definitions/Period"
                },
                "numberOfBidders": {
                    "description": "The number of unique bidders who participated in the tender",
                    "type": ["integer", "null"]
                },
                "numberOfBids": {
                    "description": "The number of bids or submissions to the tender. In the case of an auction, the number of bids may differ from the numberOfBidders.",
                    "type": ["integer", "null"]
                },
                "bidders": {
                    "description": "A list of all the companies who entered submissions for the tender.",
                    "type": "array",
                    "items": { "$ref": "#/definitions/Organization" },
                    "uniqueItems": true
                },
                "procuringEntity": {
                    "description": "The entity managing the procurement, which may be different from the buyer who is paying / using the items being procured.",
                    "$ref": "#/definitions/Organization"
                },
                "documents": {
                    "description": "All documents and attachments related to the tender, including any notices.",
                    "type": "array",
                    "mergeStrategy": "arrayMergeById",
                    "mergeOptions": {"idRef": "id"},
                    "items": { "$ref": "#/definitions/Document" },
                    "uniqueItems": true
                }
            },
            "patternProperties": {
                "^(methodJustification_[A-Za-z]{2})$": {
                    "type": ["string", "null"]
                },
                "^(selectionMethod_[A-Za-z]{2})$": {
                    "type": ["string", "null"]
                },
                "^(submissionDetails_[A-Za-z]{2})$": {
                    "type": ["string", "null"]
                }

            }
        },
        "Award": {
            "title": "Award",
            "description": "An award for the given procurement. There may be more than one award per contracting process e.g. because the contract is split amongst different providers, or because it is a standing offer.",
            "type": "object",
            "required": ["id"],
            "properties": {
                "id": {
                    "title": "Award ID",
                    "description": "The identifier for this award. It must be unique and cannot change within its Open Contracting Process (defined by a single ocid), it need not be unique in the package. e.g. ocid ABC can have awardID 1 & awardID 2 and ocid DEF can also have awardID 1 & 2. But if it is a different award, ocid cannot have awardID 1 and 1 otherwise that will cause the data to be overridden when the record is compiled.",
                    "type": "string"
                },
                "date": {
                    "title": "Award date",
                    "description": "The date of the contract award.",
                    "type": ["string", "null"],
                    "format": "date-time"
                },
                "value": {
                    "description": "The total value of this award. There may be more than one award per procurement.",
                    "$ref": "#/definitions/Value"
                },
                "suppliers": {
                    "description": "The suppliers awarded this award.",
                    "type": "array",
                    "items": { "$ref": "#/definitions/Organization" },
                    "uniqueItems": true
                },
                "items": {
                    "title": "Items Awarded",
                    "description": "The goods and services awarded in this award, broken into line items wherever possible. Items should not be duplicated, but a quantity of 2 specified instead.",
                    "type": "array",
                    "minItems": 1,
                    "items": { "$ref": "#/definitions/Item" },
                    "uniqueItems": true
                },
                "documents": {
                    "description": "All documents and attachments related to the award, including any notices.",
                    "type": "array",
                    "mergeStrategy": "arrayMergeById",
                    "mergeOptions": {"idRef": "id"},
                    "items": { "$ref": "#/definitions/Document" },
                    "uniqueItems": true
                }
            }
        },
        "Contract": {
            "type": "object",
            "title": "Contract",
            "description": "Information regarding the signed contract between the buyer and supplier(s).",
            "required": ["id"],
            "properties": {
                "id": {
                    "title": "Contract ID",
                    "description": "The identifier for this contract. It must be unique and cannot change within its Open Contracting Process (defined by a single ocid), it need not be unique in the package. e.g. ocid ABC can have contractID 1 & contractID 2 and ocid DEF can also have contractID 1 & 2. But if it is a different contract, ocid cannot have contractID 1 and 1 otherwise that will cause the data to be overridden when the record is compiled.",
                    "type": "string"
                },
                "awardID": {
                    "title": "Award ID",
                    "description": "The award.id against which this contract is being issued.",
                    "type": ["string", "null"]
                },
                "period": {
                    "description": "The start and end date for the contract.",
                    "$ref": "#/definitions/Period"
                },
                "value": {
                    "description": "The total value of this contract.",
                    "$ref": "#/definitions/Value"
                },
                "isAmendment": {
                    "title": "Is this an amendment to the contract?",
                    "description": "If true, then amendment information should be provided.",
                    "type": ["boolean", "null"]
                },
                "amendment": { "$ref": "#/definitions/Amendment" },
                "items": {
                    "title": "Items Contracted",
                    "description": "(Optional) The goods, services, and any intangible outcomes in this contract. If the items are the same as the award do not repeat.",
                    "type": "array",
                    "minItems": 1,
                    "items": { "$ref": "#/definitions/Item" },
                    "uniqueItems": true
                },
                "dateSigned": {
                    "description": "The date the contract was signed. In the case of multiple signatures, the date of the last signature.",
                    "type": ["string", "null"],
                    "format": "date-time"
                },
                "documents": {
                    "description": "All documents and attachments related to the contract, including any notices.",
                    "type": "array",
                    "mergeStrategy": "arrayMergeById",
                    "mergeOptions": {"idRef": "id"},
                    "items": { "$ref": "#/definitions/Document" },
                    "uniqueItems": true
                }
            }
        },
        "Amendment": {
            "type": "object",
            "title": "Amendment information",
            "properties": {
                "date": {
                    "title": "Amendment Date",
                    "type": ["string", "null"],
                    "format": "date-time"
                },
                "fields": {
                    "title": "Amended fields",
                    "description": "Comma-seperated list of affected fields.",
                    "type": ["string", "null"]
                },
                "justification": {
                    "description": "An explanation / justification for the amendment.",
                    "type": ["string", "null"]
                }
            }
        },
        "Period": {
            "type": "object",
            "title": "Period",
            "properties": {
                "startDate": { 
                    "description": "The state date for the period.",
                    "type": ["string", "null"],
                    "format": "date-time"
                },
                "endDate": {
                    "description": "The end date for the period.",
                    "type": ["string", "null"],
                    "format": "date-time"
                }
            }
        },
        "Document": {
            "type": "object",
            "title": "Document",
            "description": "Links to, or descriptions of, external documents can be attached at various locations within the standard. Documents may be supporting information, formal notices, downloadable forms, or any other kind of resource that should be made public as part of full open contracting.",
            "required": ["id"],
            "properties": {
                "id": {
                    "description": "A local identifier for this document. This field can be used to keep track of multiple revisions of a document, allowing a publisher to include multiple versions of the same document in a release, and allowing consuming applications to select the version of the document with the most recent modified date.",
                    "type": ["string", "null"]
                },
                "classification": {
                    "description": "[consult codelist] A classification of the document described. Values from the provided codelist should be used wherever possible, though extended values can be provided if the codelist does not have a relevant code.",
                    "type": ["string", "null"]
                },
                "title": {
                    "description": "The document title.",
                    "type": ["string", "null"]
                },
                "description": {
                    "description": "A short description of the document. We recommend descriptions do not exceed 250 words. In the event the document is not accessible online, the description field can be used to describe arrangements for obtaining a copy of the document.",
                    "type": ["string", "null"]
                },
                "url": {
                    "description": " direct link to the document or attachment. The server providing access to this document should be configured to correctly report the document mime type.",
                    "type": ["string", "null"],
                    "format": "uri"
                },
                "datePublished": {
                    "description": "The date on which the document was first published. This is particularly important for legally important documents such as notices of a tender.",
                    "type": ["string", "null"],
                    "format": "date-time"
                },
                "modified": {
                    "description": "Date that the document was last modified",
                    "type": ["string", "null"],
                    "format": "date-time"
                },
                "format": {
                    "description": "The format of the document taken from the [IANA Media Types code list](http://www.iana.org/assignments/media-types/), with the addition of one extra value for 'offline/print', used when this document entry is being used to describe the offline publication of a document. Use values from the template column. Links to web pages should be tagged 'text/html'.",
                    "type": ["string", "null"]
                },
                "language": {
                    "description": "Specifies the language of the linked document using either two-digit [ISO 639-1](https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes), or extended [BCP47 language tags](http://www.w3.org/International/articles/language-tags/). The use of two-letter codes from [ISO 639-1](https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes) is strongly recommended unless there is a clear user need for distinguishing the language subtype.",
                    "type": ["string", "null"]
                }
            },
            "patternProperties": {
                "^(description_[A-Za-z]{2})$": {
                    "type": ["string", "null"]
                },
                "^(title_[A-Za-z]{2})$": {
                    "type": ["string", "null"]
                }
            }
        },
        "Value": {
            "type": "object",
            "properties": {
                "amount": {
                    "description": "Amount as a number.",
                    "type": ["number", "null"],
                    "minimum": 0
                },
                "currency": {
                    "description": "The currency in 3-letter ISO 4217 format.",
                    "type": ["string", "null"]
                }
            }
        }
    }
}
